<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Debug Test</title>
    <script>
        async function testDashboardAPIs() {
            const token = localStorage.getItem('habitquest_token');
            if (!token) {
                console.log('No auth token found. Please login first.');
                return;
            }

            console.log('Testing Dashboard APIs...');

            try {
                // Test /api/stats/dashboard
                const dashboardResponse = await fetch('http://localhost:3001/api/stats/dashboard', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const dashboardData = await dashboardResponse.json();
                console.log('Dashboard API Response:', dashboardData);

                // Test /api/habits/today 
                const habitsResponse = await fetch('http://localhost:3001/api/habits/today', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const habitsData = await habitsResponse.json();
                console.log('Today Habits API Response:', habitsData);

                // Display results
                document.getElementById('dashboard').textContent = JSON.stringify(dashboardData, null, 2);
                document.getElementById('habits').textContent = JSON.stringify(habitsData, null, 2);
                
            } catch (error) {
                console.error('Test failed:', error);
                document.getElementById('error').textContent = error.message;
            }
        }

        window.onload = () => {
            testDashboardAPIs();
        };
    </script>
</head>
<body>
    <h1>Dashboard API Debug</h1>
    <h2>Dashboard Stats:</h2>
    <pre id="dashboard"></pre>
    <h2>Today's Habits:</h2>
    <pre id="habits"></pre>
    <h2>Errors:</h2>
    <pre id="error"></pre>
</body>
</html>
